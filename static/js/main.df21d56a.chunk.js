(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{157:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},160:function(e,t,a){e.exports={sliderScrubber:"SliderScrubber_sliderScrubber__2PdqC"}},161:function(e,t,a){e.exports=a(386)},166:function(e,t,a){},168:function(e,t,a){},175:function(e,t){},177:function(e,t){},210:function(e,t){},211:function(e,t){},384:function(e,t,a){},386:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(156),i=a.n(r),s=(a(166),a(23)),c=a(24),l=a(27),d=a(25),f=a(26),u=a(4),h=a(157),g=a.n(h),m=(a(168),a(46)),p=a(12),b=a.n(p),v=a(36),k=a(60),y=(a(258),a(158)),w=a.n(y),C=a(97),j=a.n(C),O={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"};function x(e){var t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return"undefined"!=typeof t[e.toLowerCase()]&&t[e.toLowerCase()]}var P=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1?arguments[1]:void 0,a=P(t),n=P("#333333");return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Object(m.a)(Array(e)).map(function(n,o){return(1-(r=o/e))*a+r*t;var r})}(e).map(function(e){return"#"+((1<<24)+((t=function(e,t,a){arguments.length<3&&(a=.5);for(var n=e.slice(),o=0;o<3;o++)n[o]=Math.round(n[o]+a*(t[o]-e[o]));return n}(a,n,e))[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1);var t}).reverse()},S=a(98),T=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},A=function(e,t,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.forEach(function(e){if(e.score>=t){var r=e.position,i=r.y,s=r.x;n.beginPath(),n.arc(s*o,i*o,3,0,2*Math.PI),n.fillStyle=a,n.fill()}})},R=function(e){return[e.y,e.x]},F=function(e,t,a,n,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;k.a(e,t).forEach(function(e){!function(e,t,a,n,o,r){var i=Object(S.a)(e,2),s=i[0],c=i[1],l=Object(S.a)(t,2),d=l[0],f=l[1];r.beginPath(),r.moveTo(c*o,s*o),r.lineTo(f*o,d*o),r.lineWidth=n,r.strokeStyle=a,r.stroke()}(R(e[0].position),R(e[1].position),a,n,r,o)})},D=a(159),W=a.n(D),M=a(160),_=a.n(M),q=(a(382),a(384),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={value:{min:10,max:50}},a.onChangeComplete=a.onChangeComplete.bind(Object(u.a)(Object(u.a)(a))),a.onChange=a.onChange.bind(Object(u.a)(Object(u.a)(a))),a}return Object(f.a)(t,e),Object(c.a)(t,[{key:"onChangeComplete",value:function(e){this.props.onChangeComplete&&this.props.onChangeComplete(e)}},{key:"onChange",value:function(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this.props.range;return o.a.createElement("div",{className:_.a.sliderScrubber},o.a.createElement(W.a,{draggableTrack:!0,maxValue:e&&(e.max||e)||100,minValue:e&&e.min||0,onChange:this.onChange,onChangeComplete:this.onChangeComplete,value:this.state.value}))}}]),t}(n.Component)),V=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!0,error_messages:"",stream:null,trace:[]},a.camera=void 0,a.getCanvas=function(e){a.canvas=e},a.getVideo=function(e){a.video=e},a}return Object(f.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(v.a)(b.a.mark(function e(t,a){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.props){e.next=8;break}if(t.frontCamera===this.props.frontCamera){e.next=8;break}return this.stopCamera(),e.next=5,this.setupCamera();case 5:this.camera=e.sent,this.startCamera(),this.detectPose();case 8:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"errorMessages",value:function(){this.props.errorMessages&&this.props.errorMessages(this.state.error_messages)}},{key:"getPoseRecords",value:function(){this.props.getPoseRecords&&this.props.getPoseRecords(this.state.trace)}},{key:"tracePose",value:function(e){this.props.record&&(console.log("recording frame!"),this.setState({trace:[].concat(Object(m.a)(this.state.trace),Object(m.a)(e))}))}},{key:"stopCamera",value:function(){var e=this.camera;e&&(e.srcObject.getTracks().map(function(e){return e.stop()}),this.camera=void 0,this.setState({loading:!0,stop:!0}))}},{key:"startCamera",value:function(){this.camera?this.setState({loading:!1,stop:!1}):this.stopCamera()}},{key:"setupCamera",value:function(){var e=Object(v.a)(b.a.mark(function e(){var t,a,n,o,r,i,s,c;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){e.next=4;break}throw t="Browser API navigator.mediaDevices.getUserMedia not available",this.setState({error_messages:t}),t;case 4:return a=this.props,n=a.videoWidth,o=a.videoHeight,r=this.video,i=T(),s=this.props.frontCamera,r.width=n,r.height=o,e.next=12,navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:s?"user":{exact:"environment"},width:i?void 0:n,height:i?void 0:o}});case 12:return c=e.sent,r.srcObject=c,e.abrupt("return",new Promise(function(e){r.onloadedmetadata=function(){r.play(),e(r)}}));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"detectPose",value:function(){var e=this.props,t=e.videoWidth,a=e.videoHeight,n=this.canvas,o=n.getContext("2d");n.width=t,n.height=a,this.poseDetectionFrame(o)}},{key:"poseDetectionFrame",value:function(e){var t=this,a=this.props,n=a.algorithm,o=a.imageScaleFactor,r=a.forceFlipHorizontal,i=a.outputStride,s=a.minPoseConfidence,c=a.maxPoseDetections,l=a.minPartConfidence,d=a.nmsRadius,f=a.videoWidth,u=a.videoHeight,h=a.showVideo,g=a.showPoints,m=a.showSkeleton,p=a.skeletonColor,k=a.skeletonLineWidth,y=a.frontCamera,w=a.stop,C=this.net,j=this.video,O=r||!!y,x=function(){var a=Object(v.a)(b.a.mark(function a(){var r,v;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=[],a.t0=n,a.next="single-pose"===a.t0?4:"multi-pose"===a.t0?9:13;break;case 4:return a.next=6,C.estimateSinglePose(j,o,O,i);case 6:return v=a.sent,r.push(v),a.abrupt("break",13);case 9:return a.next=11,C.estimateMultiplePoses(j,o,O,i,c,l,d);case 11:return r=a.sent,a.abrupt("break",13);case 13:e.clearRect(0,0,f,u),h&&(e.save(),O&&(e.scale(-1,1),e.translate(-f,0)),e.drawImage(j,0,0,f,u),e.restore()),r.forEach(function(t){var a=t.score,n=t.keypoints;a>=s&&(g&&A(n,l,p,e),m&&F(n,l,p,k,e))}),w||t.state.stop||!t.camera?(console.log("stopping function"),e.clearRect(0,0,f,u)):(console.log(r),t.tracePose(r),t.getPoseRecords(),requestAnimationFrame(x));case 17:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}}();x()}},{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark(function e(){var t;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.b(this.props.mobileNetArchitecture);case 2:return this.net=e.sent,console.log("loaded mobilenet"),console.log(this.net),e.prev=5,e.next=8,this.setupCamera();case 8:this.camera=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),t="This browser does not support video capture, or this device does not have a camera",this.setState({error_messages:t}),t;case 16:return e.prev=16,this.setState({loading:!1}),e.finish(16);case 19:this.detectPose();case 20:case"end":return e.stop()}},e,this,[[5,11,16,19]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){console.log("component will unmounts!"),this.stopCamera(),this.setState({stop:!0})}},{key:"render",value:function(){var e=this.state.loading?o.a.createElement("div",{className:j.a.loading},o.a.createElement("code",null,this.props.loadingText),o.a.createElement("br",null),o.a.createElement("code",{style:{color:"red",fontSize:12}},this.state.error_messages)):"";return this.errorMessages(),o.a.createElement("div",{className:j.a.posenet},e,o.a.createElement("video",{playsInline:!0,ref:this.getVideo}),o.a.createElement("canvas",{ref:this.getCanvas}))}}]),t}(n.Component);V.defaultProps={videoWidth:600,videoHeight:500,algorithm:"single-pose",mobileNetArchitecture:T()?.5:1.01,showVideo:!0,showSkeleton:!0,showPoints:!0,minPoseConfidence:.1,minPartConfidence:.5,maxPoseDetections:2,nmsRadius:20,outputStride:16,imageScaleFactor:.5,skeletonColor:"aqua",skeletonLineWidth:2,loadingText:"Loading pose detector...",frontCamera:!0,stop:!1,record:!1};var H=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onChange=a.onChange.bind(Object(u.a)(Object(u.a)(a))),a.getCanvas=function(e){a.canvas=e},a}return Object(f.a)(t,e),Object(c.a)(t,[{key:"drawPose",value:function(e){var t=this.props,a=t.videoWidth,n=t.videoHeight,o=this.canvas,r=o.getContext("2d");o.width=a,o.height=n,this.poseDrawFrame(r,e)}},{key:"poseDrawFrame",value:function(e,t){var a=this.props,n=a.minPoseConfidence,o=a.minPartConfidence,r=a.videoWidth,i=a.videoHeight,s=a.showPoints,c=a.showSkeleton,l=a.skeletonColor,d=a.skeletonLineWidth,f=this.props.poseRecords;(function(){var a=Object(v.a)(b.a.mark(function a(){var u,h,g,m;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:u=[],u=t?f.slice(t.min,t.max):f,h=u.length,g=x(l)||"#cccccc",m=E(h,g),console.log("color list"),console.log(m),e.clearRect(0,0,r,i),u.map(function(t,a){var r=t.score,i=t.keypoints;r>=n&&(s&&A(i,o,m[a],e),c&&F(i,o,m[a],d,e))});case 9:case"end":return a.stop()}},a,this)}));return function(){return a.apply(this,arguments)}})()()}},{key:"componentDidMount",value:function(){this.drawPose()}},{key:"onChange",value:function(e){this.drawPose(e)}},{key:"render",value:function(){var e=this.props.poseRecords;return o.a.createElement("div",null,o.a.createElement("div",{style:{minHeight:"50vh",border:"2px solid salmon",backgroundColor:"#050517",maxWidth:800,margin:"3rem auto",overflow:"hidden"}},o.a.createElement("div",null,o.a.createElement("canvas",{ref:this.getCanvas})),o.a.createElement(q,{onChange:this.onChange,range:e.length})),o.a.createElement("div",null),o.a.createElement("div",{style:{height:"100%",maxWidth:800,margin:"3rem auto",textAlign:"left",border:"1px dashed lightgrey",padding:"0 10px"}},o.a.createElement(w.a,{data:e,theme:O})))}}]),t}(n.Component);H.defaultProps={videoWidth:600,videoHeight:500,algorithm:"single-pose",mobileNetArchitecture:T()?.5:1.01,showVideo:!0,showSkeleton:!0,showPoints:!0,minPoseConfidence:.1,minPartConfidence:.5,maxPoseDetections:2,nmsRadius:20,outputStride:16,imageScaleFactor:.5,skeletonColor:"aqua",skeletonLineWidth:2,loadingText:"Loading pose detector...",frontCamera:!0,stop:!1,record:!1};var L=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={recording:[],replay:!1,front:!1,video:!0,multipose:!1,stop:!1},a.onToggle=a.onToggle.bind(Object(u.a)(Object(u.a)(a))),a.onToggleFrontCamera=a.onToggleFrontCamera.bind(Object(u.a)(Object(u.a)(a))),a.onToggleVideoFeed=a.onToggleVideoFeed.bind(Object(u.a)(Object(u.a)(a))),a.onTrace=a.onTrace.bind(Object(u.a)(Object(u.a)(a))),a.onToggleMultiPose=a.onToggleMultiPose.bind(Object(u.a)(Object(u.a)(a))),a.onStartRecord=a.onStartRecord.bind(Object(u.a)(Object(u.a)(a))),a.onStopRecord=a.onStopRecord.bind(Object(u.a)(Object(u.a)(a))),a}return Object(f.a)(t,e),Object(c.a)(t,[{key:"onToggle",value:function(){this.setState({replay:!this.state.replay})}},{key:"onToggleFrontCamera",value:function(){this.setState({front:!this.state.front})}},{key:"onToggleVideoFeed",value:function(){this.setState({video:!this.state.video})}},{key:"onToggleMultiPose",value:function(){this.setState({multipose:!this.state.multipose})}},{key:"onTrace",value:function(e){this.setState({recording:e})}},{key:"onStartRecord",value:function(){this.setState({record:!0})}},{key:"onStopRecord",value:function(){this.setState({record:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("div",{style:{minHeight:200,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},o.a.createElement("img",{src:g.a,className:"App-logo",alt:"logo"}),o.a.createElement("br",null),o.a.createElement("div",{style:{width:"80%",display:"flex",justifyContent:"space-evenly"}},o.a.createElement("button",{onClick:this.onToggle,style:{padding:"8px 15px",backgroundColor:0===this.state.recording.length?"salmon":"white",color:0===this.state.recording.length?"white":"black"}},"TOGGLE REPLAY"),o.a.createElement("code",null,"recorded frames: ",this.state.recording.length)),o.a.createElement("hr",{style:{width:"100%"}}),o.a.createElement("div",{style:{width:"80%",display:"flex",justifyContent:"space-evenly"}},o.a.createElement("button",{onClick:this.onToggleFrontCamera},this.state.front?"front":"rear"," camera"),o.a.createElement("button",{onClick:this.onToggleVideoFeed},"video ",this.state.video?"on":"off"),o.a.createElement("button",{onClick:this.onToggleMultiPose},this.state.multipose?"multi-":"single ","pose"),o.a.createElement("button",{onClick:this.onStartRecord},"start recording"),o.a.createElement("button",{onClick:this.onStopRecord},"stop recording")),o.a.createElement("br",null),o.a.createElement("code",{style:{fontSize:10,color:"grey",width:"70%"}},"*video toggle and single/multipose toggles don't seem to work while camera is already running. please toggle between cameras to make it work.")),this.state.replay?o.a.createElement(V,{videoWidth:600,videoHeight:500,mobileNetArchitecture:.5,outputStride:16,loadingText:"Loading...",frontCamera:this.state.front,getPoseRecords:this.onTrace,showVideo:this.state.video,algorithm:this.state.multipose?"multi-pose":"single-pose",record:this.state.record}):o.a.createElement(H,{poseRecords:this.state.recording}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},97:function(e,t,a){e.exports={loading:"Posenet_loading__3_Gk5",posenet:"Posenet_posenet__3mPFo"}}},[[161,2,1]]]);
//# sourceMappingURL=main.df21d56a.chunk.js.map